(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Yj9t:function(e,r,a){"use strict";a.r(r),a.d(r,"AuthModule",(function(){return Re}));var t=a("ofXK"),o=a("bTqV"),n=a("Wp6s"),s=a("0IaG"),i=a("f0Cb"),l=a("kmnG"),c=a("NFeN"),u=a("qFsG"),b=a("bv9b"),d=a("tyNb"),m=a("PCNd"),f=a("3Pt+"),p=a("XNiG"),g=a("1G5W"),h=a("fXoL"),v=a("LRne"),w=a("3E0/"),y=a("vkgz"),z=a("Y6oN");let N=(()=>{class e{constructor(e){this.userService=e,this.emailRegexp=/^(?=.{4,64}$)[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,this.usernameRegexp=/^(?=.{4,20}$)[a-z][a-z0-9]+(?:-[a-z0-9]+)?$/,this.passwordRegexp=/^.{8,191}$/}signin$(e){return Object(v.a)({id:0,createdAt:new Date,updatedAt:new Date,username:"johndoe",email:"john@doe.com"}).pipe(Object(w.a)(2e3),Object(y.a)(e=>this.userService.update(e)))}signup$(e){return Object(v.a)({id:0,createdAt:new Date,updatedAt:new Date,username:e.username,email:e.email}).pipe(Object(w.a)(2e3),Object(y.a)(e=>this.userService.update(e)))}}return e.ɵfac=function(r){return new(r||e)(h.Ub(z.a))},e.ɵprov=h.Fb({token:e,factory:e.ɵfac,providedIn:"root"}),e})();var O,P,$,S,I,x,M,j;function k(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,x),h.Nb())}function C(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,M),h.Nb())}function G(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,j),h.Nb())}O="Sign In",P="Enter your email",$="Enter your password",S="Please check your email",I="Please check your password",x=" You must enter a value ",M=" Must be an email ",j=" Incorrect email ";const D=["aria-label","Toggle password visibility"];function R(e,r){if(1&e){const e=h.Pb();h.Ob(0,"button",14),h.Tb(1,D),h.Xb("click",(function(){h.nc(e);const r=h.bc();return r.hidePassword=!r.hidePassword})),h.Ob(2,"mat-icon"),h.xc(3),h.Nb(),h.Nb()}if(2&e){const e=h.bc();h.zb(3),h.zc(" ",e.hidePassword?"visibility_off":"visibility"," ")}}var L,q,B,E;function _(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,L),h.Nb())}function K(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,q),h.Nb())}function J(e,r){1&e&&h.Kb(0,"mat-progress-bar",15)}function A(e,r){1&e&&(h.Ob(0,"button",16),h.Sb(1,B),h.Nb())}function T(e,r){if(1&e&&(h.Ob(0,"button",17),h.Sb(1,E),h.Nb()),2&e){const e=h.bc();h.gc("disabled",!e.formGroup.valid)}}function X(e,r){if(1&e&&(h.Ob(0,"mat-error",18),h.xc(1),h.Nb()),2&e){const e=h.bc();h.zb(1),h.zc(" ",e.errorMessage," ")}}L=" You must enter a value ",q=" Incorrect password ",B=" I don't have an account ",E=" Submit ";const Y=function(e){return{"anime-wobble":e}};let V=(()=>{class e{constructor(e,r,a){this.authService=e,this.formBuilder=r,this.router=a,this.errorMessage="",this.hidePassword=!0,this.isLoading=!1,this.isDestroyed$=new p.a,this.formGroup=this.formBuilder.group({email:[void 0,[f.m.required,f.m.pattern(e.emailRegexp)]],password:[void 0,[f.m.required]]},{validators:this.mustNotBeRejectedValidator()})}get email(){return this.formGroup.get("email")}get password(){return this.formGroup.get("password")}submit(e){var r,a;const t={email:null===(r=e.get("email"))||void 0===r?void 0:r.value,password:null===(a=e.get("password"))||void 0===a?void 0:a.value};return this.errorMessage="",this.hidePassword=!0,this.isLoading=!0,this.formGroup.disable(),this.authService.signin$(t).pipe(Object(g.a)(this.isDestroyed$)).subscribe({next:()=>this.router.navigate(["home"]),error:e=>{this.errorMessage=e,this.isLoading=!1,this.formGroup.enable()}})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}mustNotBeRejectedValidator(){return e=>{"email not found"===this.errorMessage&&(e.controls.email.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please check your email"),"incorrect password"===this.errorMessage&&(e.controls.password.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please check your password")}}}return e.ɵfac=function(r){return new(r||e)(h.Jb(N),h.Jb(f.b),h.Jb(d.a))},e.ɵcmp=h.Db({type:e,selectors:[["app-signin"]],decls:33,vars:15,consts:[[1,"centred-layout","anime-zoom-in"],[1,"card",3,"ngClass"],[3,"formGroup","ngSubmit"],["appearance","outline","color","accent"],["matInput","","formControlName","email","autofocus",""],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click",4,"ngIf",6,"aria-label"],[1,"button-group"],["mode","indeterminate","color","accent",4,"ngIf"],["type","button","mat-button","","color","accent","routerLink","/auth/signup",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["class","submit-error",4,"ngIf"],["hidden",""],["type","button","mat-icon-button","","matSuffix","",3,"click",6,"aria-label"],["mode","indeterminate","color","accent"],["type","button","mat-button","","color","accent","routerLink","/auth/signup"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],[1,"submit-error"]],template:function(e,r){1&e&&(h.Ob(0,"section",0),h.Ob(1,"mat-card",1),h.Ob(2,"mat-card-header"),h.Ob(3,"mat-card-title"),h.Sb(4,O),h.Nb(),h.Nb(),h.Ob(5,"mat-card-content"),h.Ob(6,"form",2),h.Xb("ngSubmit",(function(){return r.submit(r.formGroup)})),h.Kb(7,"mat-divider"),h.Ob(8,"mat-form-field",3),h.Ob(9,"mat-label"),h.Sb(10,P),h.Nb(),h.Kb(11,"input",4),h.vc(12,k,2,0,"mat-error",5),h.vc(13,C,2,0,"mat-error",5),h.vc(14,G,2,0,"mat-error",5),h.Nb(),h.Ob(15,"mat-form-field",3),h.Kb(16,"input",6),h.Ob(17,"mat-label"),h.Sb(18,$),h.Nb(),h.vc(19,R,4,1,"button",7),h.vc(20,_,2,0,"mat-error",5),h.vc(21,K,2,0,"mat-error",5),h.Nb(),h.Kb(22,"mat-divider"),h.Ob(23,"div",8),h.vc(24,J,1,0,"mat-progress-bar",9),h.vc(25,A,2,0,"button",10),h.vc(26,T,2,1,"button",11),h.Nb(),h.vc(27,X,2,1,"mat-error",12),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(28,"div",13),h.Ob(29,"p"),h.Sb(30,S),h.Nb(),h.Ob(31,"p"),h.Sb(32,I),h.Nb(),h.Nb()),2&e&&(h.zb(1),h.gc("ngClass",h.jc(13,Y,r.errorMessage)),h.zb(5),h.gc("formGroup",r.formGroup),h.zb(6),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.required)),h.zb(1),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.pattern)),h.zb(1),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.mustNotBeRejected)),h.zb(2),h.gc("type",r.hidePassword?"password":"text"),h.zb(3),h.gc("ngIf",!r.isLoading),h.zb(1),h.gc("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password||null==r.password.errors?null:r.password.errors.required)),h.zb(1),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.mustNotBeRejected)),h.zb(3),h.gc("ngIf",r.isLoading),h.zb(1),h.gc("ngIf",!r.isLoading),h.zb(1),h.gc("ngIf",!r.isLoading),h.zb(1),h.gc("ngIf",r.errorMessage))},directives:[n.a,t.j,n.c,n.e,n.b,f.n,f.i,f.d,i.a,l.b,l.f,u.a,f.a,f.h,f.c,t.l,l.a,o.b,l.g,c.a,b.a,d.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]:first-of-type{margin-top:40px}mat-form-field[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.button-group[_ngcontent-%COMP%]{align-content:center;display:flex;flex-direction:row;justify-content:space-between;margin-top:20px}.submit-error[_ngcontent-%COMP%]{margin:20px}"],changeDetection:0}),e})();var F,U,W;F="Check your mailbox",U=" A confirmation email has just been sent to you, please follow the link in the email to confirm your registration. ",W="Ok";let H=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onClose(){this.dialogRef.close()}}return e.ɵfac=function(r){return new(r||e)(h.Jb(s.e))},e.ɵcmp=h.Db({type:e,selectors:[["app-dialog-check-mailbox"]],decls:8,vars:0,consts:[["matDialogTitle",""],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,r){1&e&&(h.Ob(0,"h2",0),h.Sb(1,F),h.Nb(),h.Ob(2,"mat-dialog-content"),h.Ob(3,"p"),h.Sb(4,U),h.Nb(),h.Nb(),h.Ob(5,"div",1),h.Ob(6,"button",2),h.Xb("click",(function(){return r.onClose()})),h.Sb(7,W),h.Nb(),h.Nb())},directives:[s.f,s.c,s.b,o.b],styles:[""],changeDetection:0}),e})();var Q,Z,ee,re;Q="Sign Up",Z="Enter your username",ee="Enter your email",re="Enter your password";const ae=["aria-label","Toggle password visibility"];var te;te="Confirm your password";const oe=["aria-label","Toggle password visibility"];var ne,se,ie,le,ce,ue,be,de,me,fe,pe,ge,he,ve;function we(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,ie),h.Nb())}function ye(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,le),h.Nb())}function ze(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,ce),h.Nb())}function Ne(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,ue),h.Nb())}function Oe(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,be),h.Nb())}function Pe(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,de),h.Nb())}function $e(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,me),h.Nb())}function Se(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,fe),h.Nb())}function Ie(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,pe),h.Nb())}function xe(e,r){1&e&&(h.Ob(0,"mat-error"),h.Sb(1,ge),h.Nb())}function Me(e,r){1&e&&h.Kb(0,"mat-progress-bar",17)}function je(e,r){1&e&&(h.Ob(0,"button",18),h.Sb(1,he),h.Nb())}function ke(e,r){if(1&e&&(h.Ob(0,"button",19),h.Sb(1,ve),h.Nb()),2&e){const e=h.bc();h.gc("disabled",!e.formGroup.valid)}}function Ce(e,r){if(1&e&&(h.Ob(0,"mat-error",20),h.xc(1),h.cc(2,"json"),h.Nb()),2&e){const e=h.bc();h.zb(1),h.zc(" ",h.dc(2,1,e.errorMessage)," ")}}ne="Please choose another email",se="Please choose another username",ie=" You must enter a value ",le=" Must contain 4-20 alphanumeric characters ",ce=" Username already exists ",ue=" You must enter a value ",be=" Not a valid email ",de=" Email already exists ",me="You must enter a value",fe=" Must contain 8+ characters ",pe="Passwords doesn't match",ge="You must confirm the password ",he=" I already have an account ",ve=" Submit ";const Ge=function(e){return{"anime-wobble":e}},De=[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:V},{path:"signup",component:(()=>{class e{constructor(e,r,a,t){this.authService=e,this.formBuilder=r,this.router=a,this.dialog=t,this.errorMessage="",this.hidePassword=!0,this.isLoading=!1,this.isDestroyed$=new p.a,this.formGroup=this.formBuilder.group({username:[void 0,[f.m.required,f.m.pattern(e.usernameRegexp)]],email:[null,[f.m.required,f.m.pattern(e.emailRegexp)]],password:[null,[f.m.required,f.m.pattern(e.passwordRegexp)]],confirmPassword:[null,[f.m.required]]},{validators:[this.mustMatchValidator("password","confirmPassword"),this.mustNotBeRejectedValidator()]})}get email(){return this.formGroup.get("email")}get password(){return this.formGroup.get("password")}get username(){return this.formGroup.get("username")}get confirmPassword(){return this.formGroup.get("confirmPassword")}submit(e){var r,a,t;const o={username:null===(r=e.get("username"))||void 0===r?void 0:r.value,email:null===(a=e.get("email"))||void 0===a?void 0:a.value,password:null===(t=e.get("password"))||void 0===t?void 0:t.value};return this.errorMessage="",this.hidePassword=!0,this.isLoading=!0,this.formGroup.disable(),this.authService.signup$(o).pipe(Object(g.a)(this.isDestroyed$)).subscribe({next:()=>{return e=this,a=function*(){const e=this.dialog.open(H);yield e.afterClosed().toPromise(),this.router.navigate(["/home"])},new((r=void 0)||(r=Promise))((function(t,o){function n(e){try{i(a.next(e))}catch(e){o(e)}}function s(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var a;e.done?t(e.value):(a=e.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,s)}i((a=a.apply(e,[])).next())}));var e,r,a},error:e=>{this.errorMessage=e,this.isLoading=!1,this.formGroup.enable()}})}onCloseDialog(){return this.dialog.closeAll(),this.router.navigate(["home"])}hasError(e,r){var a,t;return null!==(t=null===(a=this.formGroup.get(e))||void 0===a?void 0:a.hasError(r))&&void 0!==t&&t}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}mustMatchValidator(e,r){return a=>{const t=a.controls[r];(null===t.errors||t.errors.mustMatch)&&t.setErrors(a.controls[e].value!==t.value?{mustMatch:!0}:null)}}mustNotBeRejectedValidator(){return e=>{"email already exists"===this.errorMessage&&(e.controls.email.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please choose another email"),"username already exists"===this.errorMessage&&(e.controls.username.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please choose another username")}}}return e.ɵfac=function(r){return new(r||e)(h.Jb(N),h.Jb(f.b),h.Jb(d.a),h.Jb(s.a))},e.ɵcmp=h.Db({type:e,selectors:[["app-signup"]],decls:53,vars:26,consts:[[1,"centred-layout","anime-zoom-in"],[1,"card",3,"ngClass"],["color","accent"],["novalidate","",3,"formGroup","ngSubmit"],["appearance","outline","color","accent"],["matInput","","formControlName","username","color","primary","required","","autofocus",""],[4,"ngIf"],["matInput","","formControlName","email","color","primary","required",""],["matInput","","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click",6,"aria-label"],["matInput","","formControlName","confirmPassword","required","",3,"type"],[1,"button-group"],["mode","indeterminate","color","accent",4,"ngIf"],["mat-button","","color","accent","routerLink","/auth/signin","type","button",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["class","submit-error",4,"ngIf"],["hidden",""],["mode","indeterminate","color","accent"],["mat-button","","color","accent","routerLink","/auth/signin","type","button"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],[1,"submit-error"]],template:function(e,r){1&e&&(h.Ob(0,"section",0),h.Ob(1,"mat-card",1),h.Ob(2,"mat-card-header",2),h.Ob(3,"mat-card-title"),h.Sb(4,Q),h.Nb(),h.Nb(),h.Ob(5,"mat-card-content"),h.Ob(6,"form",3),h.Xb("ngSubmit",(function(){return r.submit(r.formGroup)})),h.Kb(7,"mat-divider"),h.Ob(8,"mat-form-field",4),h.Ob(9,"mat-label"),h.Sb(10,Z),h.Nb(),h.Kb(11,"input",5),h.vc(12,we,2,0,"mat-error",6),h.vc(13,ye,2,0,"mat-error",6),h.vc(14,ze,2,0,"mat-error",6),h.Nb(),h.Ob(15,"mat-form-field",4),h.Ob(16,"mat-label"),h.Sb(17,ee),h.Nb(),h.Kb(18,"input",7),h.vc(19,Ne,2,0,"mat-error",6),h.vc(20,Oe,2,0,"mat-error",6),h.vc(21,Pe,2,0,"mat-error",6),h.Nb(),h.Ob(22,"mat-form-field",4),h.Kb(23,"input",8),h.Ob(24,"mat-label"),h.Sb(25,re),h.Nb(),h.Ob(26,"button",9),h.Tb(27,ae),h.Xb("click",(function(){return r.hidePassword=!r.hidePassword})),h.Ob(28,"mat-icon"),h.xc(29),h.Nb(),h.Nb(),h.vc(30,$e,2,0,"mat-error",6),h.vc(31,Se,2,0,"mat-error",6),h.Nb(),h.Ob(32,"mat-form-field",4),h.Kb(33,"input",10),h.Ob(34,"mat-label"),h.Sb(35,te),h.Nb(),h.Ob(36,"button",9),h.Tb(37,oe),h.Xb("click",(function(){return r.hidePassword=!r.hidePassword})),h.Ob(38,"mat-icon"),h.xc(39),h.Nb(),h.Nb(),h.vc(40,Ie,2,0,"mat-error",6),h.vc(41,xe,2,0,"mat-error",6),h.Nb(),h.Kb(42,"mat-divider"),h.Ob(43,"div",11),h.vc(44,Me,1,0,"mat-progress-bar",12),h.vc(45,je,2,0,"button",13),h.vc(46,ke,2,1,"button",14),h.Nb(),h.vc(47,Ce,3,3,"mat-error",15),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(48,"div",16),h.Ob(49,"p"),h.Sb(50,ne),h.Nb(),h.Ob(51,"p"),h.Sb(52,se),h.Nb(),h.Nb()),2&e&&(h.zb(1),h.gc("ngClass",h.jc(24,Ge,r.errorMessage)),h.zb(5),h.gc("formGroup",r.formGroup),h.zb(6),h.gc("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username||null==r.username.errors?null:r.username.errors.required)),h.zb(1),h.gc("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username||null==r.username.errors?null:r.username.errors.pattern)),h.zb(1),h.gc("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username||null==r.username.errors?null:r.username.errors.mustNotBeRejected)),h.zb(5),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.required)),h.zb(1),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.pattern)),h.zb(1),h.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.mustNotBeRejected)),h.zb(2),h.gc("type",r.hidePassword?"password":"text"),h.zb(3),h.Ab("aria-label","hidePassword password")("aria-pressed",r.hidePassword),h.zb(3),h.yc(r.hidePassword?"visibility_off":"visibility"),h.zb(1),h.gc("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password||null==r.password.errors?null:r.password.errors.required)),h.zb(1),h.gc("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password||null==r.password.errors?null:r.password.errors.pattern)),h.zb(2),h.gc("type",r.hidePassword?"password":"text"),h.zb(3),h.Ab("aria-label","hidePassword password")("aria-pressed",r.hidePassword),h.zb(3),h.zc(" ",r.hidePassword?"visibility_off":"visibility"," "),h.zb(1),h.gc("ngIf",(null==r.confirmPassword?null:r.confirmPassword.touched)&&(null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.mustMatch)),h.zb(1),h.gc("ngIf",(null==r.confirmPassword?null:r.confirmPassword.touched)&&(null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.required)),h.zb(3),h.gc("ngIf",r.isLoading),h.zb(1),h.gc("ngIf",!r.isLoading),h.zb(1),h.gc("ngIf",!r.isLoading),h.zb(1),h.gc("ngIf",r.errorMessage))},directives:[n.a,t.j,n.c,n.e,n.b,f.n,f.i,f.d,i.a,l.b,l.f,u.a,f.a,f.h,f.c,f.l,t.l,o.b,l.g,c.a,l.a,b.a,d.b],pipes:[t.f],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]:first-of-type{margin-top:40px}mat-form-field[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.button-group[_ngcontent-%COMP%]{align-content:center;display:flex;flex-direction:row;justify-content:space-between;margin-top:20px}.submit-error[_ngcontent-%COMP%]{margin:20px}"],changeDetection:0}),e})()}];let Re=(()=>{class e{}return e.ɵmod=h.Hb({type:e}),e.ɵinj=h.Gb({factory:function(r){return new(r||e)},imports:[[t.c,d.e.forChild(De),m.a,o.c,n.d,s.d,l.d,u.b,b.b,i.b,c.b]]}),e})()}}]);