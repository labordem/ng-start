(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Yj9t:function(e,r,a){"use strict";a.r(r),a.d(r,"AuthModule",(function(){return De}));var t=a("ofXK"),o=a("3Pt+"),n=a("bTqV"),s=a("Wp6s"),i=a("0IaG"),l=a("f0Cb"),c=a("kmnG"),u=a("NFeN"),b=a("qFsG"),d=a("bv9b"),m=a("tyNb"),f=a("XNiG"),p=a("1G5W"),g=a("fXoL"),h=a("LRne"),v=a("3E0/"),w=a("vkgz"),y=a("Y6oN");let z=(()=>{class e{constructor(e){this.userService=e,this.emailRegexp=/^(?=.{4,64}$)[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,this.usernameRegexp=/^(?=.{4,20}$)[a-z][a-z0-9]+(?:-[a-z0-9]+)?$/,this.passwordRegexp=/^.{8,191}$/}signin$(e){return Object(h.a)({id:0,createdAt:new Date,updatedAt:new Date,username:"johndoe",email:"john@doe.com"}).pipe(Object(v.a)(2e3),Object(w.a)(e=>this.userService.update(e)))}signup$(e){return Object(h.a)({id:0,createdAt:new Date,updatedAt:new Date,username:e.username,email:e.email}).pipe(Object(v.a)(2e3),Object(w.a)(e=>this.userService.update(e)))}}return e.ɵfac=function(r){return new(r||e)(g.Ub(y.a))},e.ɵprov=g.Fb({token:e,factory:e.ɵfac,providedIn:"root"}),e})();var N,O,P,$,S,I,x,M;function j(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,I),g.Nb())}function k(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,x),g.Nb())}function G(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,M),g.Nb())}N="Sign In",O="Enter your email",P="Enter your password",$="Please check your email",S="Please check your password",I=" You must enter a value ",x=" Must be an email ",M=" Incorrect email ";const C=["aria-label","Toggle password visibility"];function D(e,r){if(1&e){const e=g.Pb();g.Ob(0,"button",14),g.Tb(1,C),g.Xb("click",(function(){g.nc(e);const r=g.bc();return r.hidePassword=!r.hidePassword})),g.Ob(2,"mat-icon"),g.xc(3),g.Nb(),g.Nb()}if(2&e){const e=g.bc();g.zb(3),g.zc(" ",e.hidePassword?"visibility_off":"visibility"," ")}}var R,L,q,B;function E(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,R),g.Nb())}function _(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,L),g.Nb())}function K(e,r){1&e&&g.Kb(0,"mat-progress-bar",15)}function J(e,r){1&e&&(g.Ob(0,"button",16),g.Sb(1,q),g.Nb())}function A(e,r){if(1&e&&(g.Ob(0,"button",17),g.Sb(1,B),g.Nb()),2&e){const e=g.bc();g.gc("disabled",!e.formGroup.valid)}}function T(e,r){if(1&e&&(g.Ob(0,"mat-error",18),g.xc(1),g.Nb()),2&e){const e=g.bc();g.zb(1),g.zc(" ",e.errorMessage," ")}}R=" You must enter a value ",L=" Incorrect password ",q=" I don't have an account ",B=" Submit ";const X=function(e){return{"anime-wobble":e}};let Y=(()=>{class e{constructor(e,r,a){this.authService=e,this.formBuilder=r,this.router=a,this.errorMessage="",this.hidePassword=!0,this.isLoading=!1,this.isDestroyed$=new f.a,this.formGroup=this.formBuilder.group({email:[void 0,[o.m.required,o.m.pattern(e.emailRegexp)]],password:[void 0,[o.m.required]]},{validators:this.mustNotBeRejectedValidator()})}get email(){return this.formGroup.get("email")}get password(){return this.formGroup.get("password")}submit(e){var r,a;const t={email:null===(r=e.get("email"))||void 0===r?void 0:r.value,password:null===(a=e.get("password"))||void 0===a?void 0:a.value};return this.errorMessage="",this.hidePassword=!0,this.isLoading=!0,this.formGroup.disable(),this.authService.signin$(t).pipe(Object(p.a)(this.isDestroyed$)).subscribe({next:()=>this.router.navigate(["home"]),error:e=>{this.errorMessage=e,this.isLoading=!1,this.formGroup.enable()}})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}mustNotBeRejectedValidator(){return e=>{"email not found"===this.errorMessage&&(e.controls.email.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please check your email"),"incorrect password"===this.errorMessage&&(e.controls.password.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please check your password")}}}return e.ɵfac=function(r){return new(r||e)(g.Jb(z),g.Jb(o.b),g.Jb(m.a))},e.ɵcmp=g.Db({type:e,selectors:[["app-signin"]],decls:33,vars:15,consts:[[1,"centred-layout","anime-zoom-in"],[1,"card",3,"ngClass"],[3,"formGroup","ngSubmit"],["appearance","outline","color","accent"],["matInput","","formControlName","email","autofocus",""],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click",4,"ngIf",6,"aria-label"],[1,"button-group"],["mode","indeterminate","color","accent",4,"ngIf"],["type","button","mat-button","","color","accent","routerLink","/auth/signup",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["class","submit-error",4,"ngIf"],["hidden",""],["type","button","mat-icon-button","","matSuffix","",3,"click",6,"aria-label"],["mode","indeterminate","color","accent"],["type","button","mat-button","","color","accent","routerLink","/auth/signup"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],[1,"submit-error"]],template:function(e,r){1&e&&(g.Ob(0,"section",0),g.Ob(1,"mat-card",1),g.Ob(2,"mat-card-header"),g.Ob(3,"mat-card-title"),g.Sb(4,N),g.Nb(),g.Nb(),g.Ob(5,"mat-card-content"),g.Ob(6,"form",2),g.Xb("ngSubmit",(function(){return r.submit(r.formGroup)})),g.Kb(7,"mat-divider"),g.Ob(8,"mat-form-field",3),g.Ob(9,"mat-label"),g.Sb(10,O),g.Nb(),g.Kb(11,"input",4),g.vc(12,j,2,0,"mat-error",5),g.vc(13,k,2,0,"mat-error",5),g.vc(14,G,2,0,"mat-error",5),g.Nb(),g.Ob(15,"mat-form-field",3),g.Kb(16,"input",6),g.Ob(17,"mat-label"),g.Sb(18,P),g.Nb(),g.vc(19,D,4,1,"button",7),g.vc(20,E,2,0,"mat-error",5),g.vc(21,_,2,0,"mat-error",5),g.Nb(),g.Kb(22,"mat-divider"),g.Ob(23,"div",8),g.vc(24,K,1,0,"mat-progress-bar",9),g.vc(25,J,2,0,"button",10),g.vc(26,A,2,1,"button",11),g.Nb(),g.vc(27,T,2,1,"mat-error",12),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Ob(28,"div",13),g.Ob(29,"p"),g.Sb(30,$),g.Nb(),g.Ob(31,"p"),g.Sb(32,S),g.Nb(),g.Nb()),2&e&&(g.zb(1),g.gc("ngClass",g.jc(13,X,r.errorMessage)),g.zb(5),g.gc("formGroup",r.formGroup),g.zb(6),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.required)),g.zb(1),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.pattern)),g.zb(1),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.mustNotBeRejected)),g.zb(2),g.gc("type",r.hidePassword?"password":"text"),g.zb(3),g.gc("ngIf",!r.isLoading),g.zb(1),g.gc("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password||null==r.password.errors?null:r.password.errors.required)),g.zb(1),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.mustNotBeRejected)),g.zb(3),g.gc("ngIf",r.isLoading),g.zb(1),g.gc("ngIf",!r.isLoading),g.zb(1),g.gc("ngIf",!r.isLoading),g.zb(1),g.gc("ngIf",r.errorMessage))},directives:[s.a,t.j,s.c,s.e,s.b,o.n,o.i,o.d,l.a,c.b,c.f,b.a,o.a,o.h,o.c,t.l,c.a,n.b,c.g,u.a,d.a,m.b],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]:first-of-type{margin-top:40px}mat-form-field[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.button-group[_ngcontent-%COMP%]{align-content:center;display:flex;flex-direction:row;justify-content:space-between;margin-top:20px}.submit-error[_ngcontent-%COMP%]{margin:20px}"],changeDetection:0}),e})();var V,F,U;V="Check your mailbox",F=" A confirmation email has just been sent to you, please follow the link in the email to confirm your registration. ",U="Ok";let W=(()=>{class e{constructor(e){this.dialogRef=e}ngOnInit(){}onClose(){this.dialogRef.close()}}return e.ɵfac=function(r){return new(r||e)(g.Jb(i.e))},e.ɵcmp=g.Db({type:e,selectors:[["app-dialog-check-mailbox"]],decls:8,vars:0,consts:[["matDialogTitle",""],["mat-dialog-actions",""],["mat-button","",3,"click"]],template:function(e,r){1&e&&(g.Ob(0,"h2",0),g.Sb(1,V),g.Nb(),g.Ob(2,"mat-dialog-content"),g.Ob(3,"p"),g.Sb(4,F),g.Nb(),g.Nb(),g.Ob(5,"div",1),g.Ob(6,"button",2),g.Xb("click",(function(){return r.onClose()})),g.Sb(7,U),g.Nb(),g.Nb())},directives:[i.f,i.c,i.b,n.b],styles:[""],changeDetection:0}),e})();var H,Q,Z,ee;H="Sign Up",Q="Enter your username",Z="Enter your email",ee="Enter your password";const re=["aria-label","Toggle password visibility"];var ae;ae="Confirm your password";const te=["aria-label","Toggle password visibility"];var oe,ne,se,ie,le,ce,ue,be,de,me,fe,pe,ge,he;function ve(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,se),g.Nb())}function we(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,ie),g.Nb())}function ye(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,le),g.Nb())}function ze(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,ce),g.Nb())}function Ne(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,ue),g.Nb())}function Oe(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,be),g.Nb())}function Pe(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,de),g.Nb())}function $e(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,me),g.Nb())}function Se(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,fe),g.Nb())}function Ie(e,r){1&e&&(g.Ob(0,"mat-error"),g.Sb(1,pe),g.Nb())}function xe(e,r){1&e&&g.Kb(0,"mat-progress-bar",17)}function Me(e,r){1&e&&(g.Ob(0,"button",18),g.Sb(1,ge),g.Nb())}function je(e,r){if(1&e&&(g.Ob(0,"button",19),g.Sb(1,he),g.Nb()),2&e){const e=g.bc();g.gc("disabled",!e.formGroup.valid)}}function ke(e,r){if(1&e&&(g.Ob(0,"mat-error",20),g.xc(1),g.cc(2,"json"),g.Nb()),2&e){const e=g.bc();g.zb(1),g.zc(" ",g.dc(2,1,e.errorMessage)," ")}}oe="Please choose another email",ne="Please choose another username",se=" You must enter a value ",ie=" Must contain 4-20 alphanumeric characters ",le=" Username already exists ",ce=" You must enter a value ",ue=" Not a valid email ",be=" Email already exists ",de="You must enter a value",me=" Must contain 8+ characters ",fe="Passwords doesn't match",pe="You must confirm the password ",ge=" I already have an account ",he=" Submit ";const Ge=function(e){return{"anime-wobble":e}},Ce=[{path:"",redirectTo:"signin",pathMatch:"full"},{path:"signin",component:Y},{path:"signup",component:(()=>{class e{constructor(e,r,a,t){this.authService=e,this.formBuilder=r,this.router=a,this.dialog=t,this.errorMessage="",this.hidePassword=!0,this.isLoading=!1,this.isDestroyed$=new f.a,this.formGroup=this.formBuilder.group({username:[void 0,[o.m.required,o.m.pattern(e.usernameRegexp)]],email:[null,[o.m.required,o.m.pattern(e.emailRegexp)]],password:[null,[o.m.required,o.m.pattern(e.passwordRegexp)]],confirmPassword:[null,[o.m.required]]},{validators:[this.mustMatchValidator("password","confirmPassword"),this.mustNotBeRejectedValidator()]})}get email(){return this.formGroup.get("email")}get password(){return this.formGroup.get("password")}get username(){return this.formGroup.get("username")}get confirmPassword(){return this.formGroup.get("confirmPassword")}submit(e){var r,a,t;const o={username:null===(r=e.get("username"))||void 0===r?void 0:r.value,email:null===(a=e.get("email"))||void 0===a?void 0:a.value,password:null===(t=e.get("password"))||void 0===t?void 0:t.value};return this.errorMessage="",this.hidePassword=!0,this.isLoading=!0,this.formGroup.disable(),this.authService.signup$(o).pipe(Object(p.a)(this.isDestroyed$)).subscribe({next:()=>{return e=this,a=function*(){const e=this.dialog.open(W);yield e.afterClosed().toPromise(),this.router.navigate(["/home"])},new((r=void 0)||(r=Promise))((function(t,o){function n(e){try{i(a.next(e))}catch(e){o(e)}}function s(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var a;e.done?t(e.value):(a=e.value,a instanceof r?a:new r((function(e){e(a)}))).then(n,s)}i((a=a.apply(e,[])).next())}));var e,r,a},error:e=>{this.errorMessage=e,this.isLoading=!1,this.formGroup.enable()}})}onCloseDialog(){return this.dialog.closeAll(),this.router.navigate(["home"])}hasError(e,r){var a,t;return null!==(t=null===(a=this.formGroup.get(e))||void 0===a?void 0:a.hasError(r))&&void 0!==t&&t}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.complete()}mustMatchValidator(e,r){return a=>{const t=a.controls[r];(null===t.errors||t.errors.mustMatch)&&t.setErrors(a.controls[e].value!==t.value?{mustMatch:!0}:null)}}mustNotBeRejectedValidator(){return e=>{"email already exists"===this.errorMessage&&(e.controls.email.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please choose another email"),"username already exists"===this.errorMessage&&(e.controls.username.setErrors({mustNotBeRejected:!0}),this.errorMessage="Please choose another username")}}}return e.ɵfac=function(r){return new(r||e)(g.Jb(z),g.Jb(o.b),g.Jb(m.a),g.Jb(i.a))},e.ɵcmp=g.Db({type:e,selectors:[["app-signup"]],decls:53,vars:26,consts:[[1,"centred-layout","anime-zoom-in"],[1,"card",3,"ngClass"],["color","accent"],["novalidate","",3,"formGroup","ngSubmit"],["appearance","outline","color","accent"],["matInput","","formControlName","username","color","primary","required","","autofocus",""],[4,"ngIf"],["matInput","","formControlName","email","color","primary","required",""],["matInput","","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click",6,"aria-label"],["matInput","","formControlName","confirmPassword","required","",3,"type"],[1,"button-group"],["mode","indeterminate","color","accent",4,"ngIf"],["mat-button","","color","accent","routerLink","/auth/signin","type","button",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["class","submit-error",4,"ngIf"],["hidden",""],["mode","indeterminate","color","accent"],["mat-button","","color","accent","routerLink","/auth/signin","type","button"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],[1,"submit-error"]],template:function(e,r){1&e&&(g.Ob(0,"section",0),g.Ob(1,"mat-card",1),g.Ob(2,"mat-card-header",2),g.Ob(3,"mat-card-title"),g.Sb(4,H),g.Nb(),g.Nb(),g.Ob(5,"mat-card-content"),g.Ob(6,"form",3),g.Xb("ngSubmit",(function(){return r.submit(r.formGroup)})),g.Kb(7,"mat-divider"),g.Ob(8,"mat-form-field",4),g.Ob(9,"mat-label"),g.Sb(10,Q),g.Nb(),g.Kb(11,"input",5),g.vc(12,ve,2,0,"mat-error",6),g.vc(13,we,2,0,"mat-error",6),g.vc(14,ye,2,0,"mat-error",6),g.Nb(),g.Ob(15,"mat-form-field",4),g.Ob(16,"mat-label"),g.Sb(17,Z),g.Nb(),g.Kb(18,"input",7),g.vc(19,ze,2,0,"mat-error",6),g.vc(20,Ne,2,0,"mat-error",6),g.vc(21,Oe,2,0,"mat-error",6),g.Nb(),g.Ob(22,"mat-form-field",4),g.Kb(23,"input",8),g.Ob(24,"mat-label"),g.Sb(25,ee),g.Nb(),g.Ob(26,"button",9),g.Tb(27,re),g.Xb("click",(function(){return r.hidePassword=!r.hidePassword})),g.Ob(28,"mat-icon"),g.xc(29),g.Nb(),g.Nb(),g.vc(30,Pe,2,0,"mat-error",6),g.vc(31,$e,2,0,"mat-error",6),g.Nb(),g.Ob(32,"mat-form-field",4),g.Kb(33,"input",10),g.Ob(34,"mat-label"),g.Sb(35,ae),g.Nb(),g.Ob(36,"button",9),g.Tb(37,te),g.Xb("click",(function(){return r.hidePassword=!r.hidePassword})),g.Ob(38,"mat-icon"),g.xc(39),g.Nb(),g.Nb(),g.vc(40,Se,2,0,"mat-error",6),g.vc(41,Ie,2,0,"mat-error",6),g.Nb(),g.Kb(42,"mat-divider"),g.Ob(43,"div",11),g.vc(44,xe,1,0,"mat-progress-bar",12),g.vc(45,Me,2,0,"button",13),g.vc(46,je,2,1,"button",14),g.Nb(),g.vc(47,ke,3,3,"mat-error",15),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Ob(48,"div",16),g.Ob(49,"p"),g.Sb(50,oe),g.Nb(),g.Ob(51,"p"),g.Sb(52,ne),g.Nb(),g.Nb()),2&e&&(g.zb(1),g.gc("ngClass",g.jc(24,Ge,r.errorMessage)),g.zb(5),g.gc("formGroup",r.formGroup),g.zb(6),g.gc("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username||null==r.username.errors?null:r.username.errors.required)),g.zb(1),g.gc("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username||null==r.username.errors?null:r.username.errors.pattern)),g.zb(1),g.gc("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username||null==r.username.errors?null:r.username.errors.mustNotBeRejected)),g.zb(5),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.required)),g.zb(1),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.pattern)),g.zb(1),g.gc("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email||null==r.email.errors?null:r.email.errors.mustNotBeRejected)),g.zb(2),g.gc("type",r.hidePassword?"password":"text"),g.zb(3),g.Ab("aria-label","hidePassword password")("aria-pressed",r.hidePassword),g.zb(3),g.yc(r.hidePassword?"visibility_off":"visibility"),g.zb(1),g.gc("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password||null==r.password.errors?null:r.password.errors.required)),g.zb(1),g.gc("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password||null==r.password.errors?null:r.password.errors.pattern)),g.zb(2),g.gc("type",r.hidePassword?"password":"text"),g.zb(3),g.Ab("aria-label","hidePassword password")("aria-pressed",r.hidePassword),g.zb(3),g.zc(" ",r.hidePassword?"visibility_off":"visibility"," "),g.zb(1),g.gc("ngIf",(null==r.confirmPassword?null:r.confirmPassword.touched)&&(null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.mustMatch)),g.zb(1),g.gc("ngIf",(null==r.confirmPassword?null:r.confirmPassword.touched)&&(null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.required)),g.zb(3),g.gc("ngIf",r.isLoading),g.zb(1),g.gc("ngIf",!r.isLoading),g.zb(1),g.gc("ngIf",!r.isLoading),g.zb(1),g.gc("ngIf",r.errorMessage))},directives:[s.a,t.j,s.c,s.e,s.b,o.n,o.i,o.d,l.a,c.b,c.f,b.a,o.a,o.h,o.c,o.l,t.l,n.b,c.g,u.a,c.a,d.a,m.b],pipes:[t.f],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]:first-of-type{margin-top:40px}mat-form-field[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.button-group[_ngcontent-%COMP%]{align-content:center;display:flex;flex-direction:row;justify-content:space-between;margin-top:20px}.submit-error[_ngcontent-%COMP%]{margin:20px}"],changeDetection:0}),e})()}];let De=(()=>{class e{}return e.ɵmod=g.Hb({type:e}),e.ɵinj=g.Gb({factory:function(r){return new(r||e)},imports:[[t.c,m.e.forChild(Ce),o.e,o.k,n.c,s.d,i.d,c.d,b.b,d.b,l.b,u.b]]}),e})()}}]);